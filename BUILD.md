# Building project

## Installing JDK
1. Installing JDK over version 1.8 (Remove older JDKs)
2. Installing Eclipse over Luna


## Installing Java CC plugin in eclipse

1. Eclipse > Help > Eclipse Marketplace > Findindg "JavaCC"
2. Installing JavaCC Eclipse Plug-in 1.5.33
3. Selecting license agreement and selecting Finish
4. JavaCC becomes installed and eclipse restarts

## Maven setting under proxy network environment

If you are working under proxy network environment.

1. Create a maven setting (ex. maven_setting.xml )

```xml
    <settings>
     <proxies>
      <proxy>
       <id>http</id>
       <active>true</active>
       <protocol>http</protocol>
       <host>{PROXY IP ADDRESS}</host>
       <port>8080</port>
       <nonProxyHosts>localhost|127.0.0.1</nonProxyHosts>
      </proxy>
      <proxy>
       <id>https</id>
       <active>true</active>
       <protocol>https</protocol>
       <host>{PROXY IP ADDRESS}</host>
       <port>8080</port>
       <nonProxyHosts>localhost|127.0.0.1</nonProxyHosts>
      </proxy>
     </proxies>
     <activeProfiles>
      <!--make the profile active all the time -->
      <activeProfile>securecentral</activeProfile>
     </activeProfiles>
     <profiles>
      <profile>
        <id>securecentral</id>
        <!--Override the repository (and pluginRepository) "central" from the
        Maven Super POM -->
        <repositories>
         <repository>
          <id>central</id>
          <url>http://repo1.maven.org/maven2</url>
          <releases>
           <enabled>true</enabled>
          </releases>
         </repository>
        </repositories>
        <pluginRepositories>
         <pluginRepository>
          <id>central</id>
          <name>Maven Plugin Repository</name>
          <url>http://repo1.maven.org/maven2</url>
          <layout>default</layout>
          <snapshots>
           <enabled>false</enabled>
          </snapshots>
          <releases>
           <updatePolicy>never</updatePolicy>
          </releases>
         </pluginRepository>
        </pluginRepositories>
       </profile>
      </profiles>
     </settings>
```

2. Eclipse > Window > Preference > Maven > User Settings

   * Changing 'User Settings' path to the path of maven setting file of step 1
   * 'Update Settings' > Apply > Ok


## Importing github project

1.
2.


## Configuring Java CC option

1. Selecting Package Explorer > mezi-compiler > Right Click > Properties > JavaCC option > Global options
 * Configure 'Set the javaCC jar file' to {eclipse}\plugins\sf.eclipse.javacc_1.5.33\jars\javacc-5.0.jar
 * Configure 'Set the javaCC jar file' to {eclipse}\plugins\sf.eclipse.javacc_1.5.33\jars\jtb-1.4.11.jar


## Parser code generation

1. Selecting mezi-compiler/src/main/java/mezic/parser/Parser.jjt in the Package Explorer.
2. Right click > Selecting 'Compile with javacc | jjtree | jtb'
   - Then mezic parser code are generated by the JavaCC

If you meet following error, then remove older JDK versions.
>Error: Registry key 'Software\JavaSoft\Java Runtime Environment'\CurrentVersion'
>has value '1.8', but '1.7' is required.
>Error: could not find java.dll
>Error: Could not find Java SE Runtime Environment.



## Helloworld compilation, and execution   

1. Adding class path for compiled class file
  * Package Explorer > mezi-compiler > right click > Build Path > Configure Build Path > Libraries tab
  * Select 'Add Class Folder'
  * Select 'mezi-compiler/path' > Ok
   - 'mezi-compiler/path' becomes designated as build path in Package Explorer

2. Open code_base/example/e000_helloworld.mz

```java
    class Hello
    {
    	static fn main( args: String[] )
    	{
    		System.out.println("Hello World!!")
    	}
    }
```

3. Open src/main/java/mezic/test/CompileHelloworld.java in eclipse editor
  - Configure proper java runtime jar in compiler class paths configuration

```java
        Compiler runner = new Compiler.Builder()
        		.setPrintout(System.out)
        		.setSourcebase("code_base/")
        		.setTargetbase("path/")
                .setClasspathes(new String[] {
                		"path/",
                		"{JRE Home Path}/lib/rt.jar",
                		"target/classes/",
                		})
                .setDfltImportpkgs(new String[] {
                		"java/lang",
                		}).build();
```

for example,

```java
                .setClasspathes(new String[] {
                		"path/",
                		"C:/Program Files/Java/jdk1.8.0_121/jre/lib/rt.jar",
                		"target/classes/",
                		})
```

  - Run > Run As > Java Application		

```
    deleting path/example (18 files)
    Parsing(example.e000_helloworld) is completed
    Compilation is completed
    Hello World!!
```

or

  - Select Package Explorer > path > example > Hello.class
    (If you cannot see the class file, press F5 for refresh)

  - Right click > Run As > Java Application

```
    Hello World!!
```
